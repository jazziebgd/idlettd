<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IdleTTD: IdleTTD game script</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IdleTTD<span id="projectnumber">&#160;2.0.0</span>
   </div>
   <div id="projectbrief">IdleTTD - a gamescript for OpenTTD</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">IdleTTD game script </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro_sec">Introduction</a></li>
<li class="level1"><a href="#usage_sec">Usage</a><ul><li class="level2"><a href="#install_subsec">Installation</a></li>
<li class="level2"><a href="#config_sec">Configuration</a></li>
<li class="level2"><a href="#run_subsec">Running IdleTTD</a><ul><li class="level3"><a href="#new_game_usage">Starting a new game</a></li>
<li class="level3"><a href="#saved_game_usage">Loading a game saved with IdleTTD</a></li>
<li class="level3"><a href="#story_book_usage">In-game usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#doc_sec">Documentation</a><ul><li class="level2"><a href="#doc_general">Script lifecycle</a></li>
<li class="level2"><a href="#doc_logging">Logging</a></li>
<li class="level2"><a href="#doc_classes">IdleTTD classes</a><ul><li class="level3"><a href="#doc_main">MainClass</a></li>
<li class="level3"><a href="#doc_story">IdleStory</a></li>
<li class="level3"><a href="#doc_pages">IdlePages</a></li>
<li class="level3"><a href="#doc_util">IdleUtil</a></li>
<li class="level3"><a href="#doc_logger">Logger</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#faq_sec">FAQ</a><ul><li class="level2"><a href="#faq_1">I started a game and nothing happened!</a></li>
<li class="level2"><a href="#faq_2">I loaded a game and nothing happened!</a></li>
<li class="level2"><a href="#faq_3">I can&#39;t close idle report window!</a></li>
<li class="level2"><a href="#faq_4">I loaded a game and IdleTTD took all my money away!</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>IdleTTD is a game script that converts <em>OpenTTD</em> into an idle-like game without affecting core gameplay. Players can earn money even when the game is not running.</p>
<h1><a class="anchor" id="usage_sec"></a>
Usage</h1>
<h2><a class="anchor" id="install_subsec"></a>
Installation</h2>
<p>Install <b>IdleTTD</b> game script using OpenTTD interface or copy it to your OpenTTD <code>game</code> directory.</p>
<h2><a class="anchor" id="config_sec"></a>
Configuration</h2>
<p>Script can be configured using the OpenTTD interface for game scripts. </p><div class="image">
<img src="script-config-small.png" alt=""/>
<div class="caption">
IdleTTD game script configuration</div></div>
<center> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadCenter">Type / Range   </th><th class="markdownTableHeadCenter">Default   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>idle_multiplier</code>   </td><td class="markdownTableBodyCenter">1 - 10   </td><td class="markdownTableBodyCenter"><b>2</b>   </td><td class="markdownTableBodyNone">Multiplier used to calculate idle balance   </td><td class="markdownTableBodyNone"><em>Integer value is multiplied by 0.001 (0.1%) to get actual value</em>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>show_intro</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyCenter"><em><code><b>true</b></code></em>   </td><td class="markdownTableBodyNone">Enables or disables intro popups   </td><td class="markdownTableBodyNone"><em>Does not affect idle report windows.</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>show_news</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyCenter"><em><code><b>true</b></code></em>   </td><td class="markdownTableBodyNone">Enables or disables idle balance news   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>day_interval</code>   </td><td class="markdownTableBodyCenter">1 - 7   </td><td class="markdownTableBodyCenter"><b>2</b>   </td><td class="markdownTableBodyNone">Days to wait after each script run   </td><td class="markdownTableBodyNone"><em>Intended for eventual performance tuning.</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone" colspan="5"><center><b>Developer mode settings</b><br  />
<small>Hidden by default, you need to <a href="https://wiki.openttd.org/en/Development/Script/Need%20To%20Know#logging-and-debug-panel" target="_blank">enable developer tools</a> in OpenTTD to see them.</small></center>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>idle_enabled</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyCenter"><em><code><em>true</em></code></em>   </td><td class="markdownTableBodyNone">Enables or disables entire script   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>show_story_debug</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyCenter"><code><em>false</em></code>   </td><td class="markdownTableBodyNone">Enables or disables debug text on pages   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ignore_hq</code>   </td><td class="markdownTableBodyCenter"><code>bool</code>   </td><td class="markdownTableBodyCenter"><code><em>false</em></code>   </td><td class="markdownTableBodyNone">Don't require HQ to start idling   </td><td class="markdownTableBodyNone"><em>Might alter the way script was intended to work, use with caution.</em>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>log_level</code>   </td><td class="markdownTableBodyCenter">0-5   </td><td class="markdownTableBodyCenter"><b>2</b>   </td><td class="markdownTableBodyNone">Filters logs messages by level   </td><td class="markdownTableBodyNone"></td></tr>
</table>
</center><h2><a class="anchor" id="run_subsec"></a>
Running IdleTTD</h2>
<p>Set <b>IdleTTD</b> as your active game script, configure it if needed and play the game. </p><dl class="section note"><dt>Note</dt><dd>Script is made only for single player games, won't do anything in multiplayer mode.</dd></dl>
<h3><a class="anchor" id="new_game_usage"></a>
Starting a new game</h3>
<p>Intro window will open when new game starts, containing some general info for the player. Other than that, nothing changes in the gameplay until you build Company HQ, save and later load the game. Even the intro window itself can be disabled via script settings.</p>
<h3><a class="anchor" id="saved_game_usage"></a>
Loading a game saved with IdleTTD</h3>
<p>Upon loading a game saved <b>IdleTTD</b> shows a window with idle balance report for player review. </p><div class="image">
<img src="report-small.png" alt=""/>
<div class="caption">
Idle report window</div></div>
<p> Once player confirms with the button, their bank balance gets updated.</p>
<hr  />
<h3><a class="anchor" id="story_book_usage"></a>
In-game usage</h3>
<p>Player can open closed IdleTTD story book page using the toolbar at any time. All story book pages expect report contain "Help" button that opens help screen with detailed information and help text about IdleTTD.</p>
<p>When player saves the game with negative balance IdleTTD will warn them about losing money upon next game load.</p>
<p>If player haven't met one of prerequisites for IdleTTD, they will be informed accordingly. </p><div class="image">
<img src="missing-hq-small.png" alt=""/>
<div class="caption">
Missing HQ window</div></div>
<p> IdleTTD might open a window informing them about Company HQ being required, that they have no valid running vehicles etc.</p>
<hr  />
<p>Player can review idle statistics at any moment by opening story book page for IdleTTD. </p><div class="image">
<img src="statistics-small.png" alt=""/>
<div class="caption">
Idle statistics window</div></div>
<hr  />
<h1><a class="anchor" id="doc_sec"></a>
Documentation</h1>
<p>All files, classes and members in the script are documented with Doxygen. You can dive right in by exploring <a href="annotated.html">class list</a> or <a href="files.html">file list</a>.</p>
<h2><a class="anchor" id="doc_general"></a>
Script lifecycle</h2>
<p>The central hub that manages majority of the IdleTTD features is <a class="el" href="d7/d13/class_idle_story.html" title="Class that contains main IdleTTD code.">IdleStory</a> class. Its instance is created by <a class="el" href="d5/d5e/class_main_class.html" title="IdleTTD GSController instance.">MainClass</a> which extends <code>GSController</code> class from NoGo API (<a href="https://docs.openttd.org/gs-api/classGSController" target="_blank">documentation</a>). Once game and all its data becomes available, <a class="el" href="d7/d13/class_idle_story.html#a4ee746cb12cc6874510439575f85a999" title="Initializes game session.">IdleStory.Initialize()</a> is called and IdleTTD starts working.</p>
<p>IdleTTD "main" process is <a class="el" href="d7/d13/class_idle_story.html#a25e40930a26ac9f78dd42706ad8f3cf5" title="Executes one game script iteration.">IdleStory.runIdleLoop()</a> function that gets called repeatedly while the game is active. Depending on user actions, <a class="el" href="d7/d13/class_idle_story.html#a747985d06b5102dc5ed52b01846e5163" title="Handles button clicks.">IdleStory.HandleButtonClick()</a> might also be called at any time.</p>
<p>Story pages are managed by <a class="el" href="da/db4/class_idle_pages.html" title="Handles story book pages for IdleTTD.">IdlePages</a> class that is created by <a class="el" href="d7/d13/class_idle_story.html" title="Class that contains main IdleTTD code.">IdleStory</a> instance.</p>
<h2><a class="anchor" id="doc_logging"></a>
Logging</h2>
<p>IdleTTD comes with <a class="el" href="d3/d42/class_logger.html" title="Class that handles all logging in IdleTTD.">Logger</a> class for all logging purposes. Logging can be configured with <a class="el" href="#config_sec">log_level</a> game script setting. For info about all log levels available check out <a class="el" href="d0/d68/constants_8nut.html#ad28c7b0f63def160057028c0eec9128a" title="Log levels for IdleTTD.">ScriptLogLevels</a> enum.</p>
<p>Static class methods are available for each log level:</p><ul>
<li><a class="el" href="d3/d42/class_logger.html#a536ea22257a5819ca8d1f86a3f4851e1" title="Logs verbose message.">Logger.Verbose()</a> - Lowest log level for least important or very frequest messages</li>
<li><a class="el" href="d3/d42/class_logger.html#ad05f09b7a6ffcd181f681e0ae38a5b05" title="Logs debug message.">Logger.Debug()</a> - Logs debug (low priority) messages</li>
<li><a class="el" href="d3/d42/class_logger.html#ae46ac80b5ec2683073cc34d4f125ee48" title="Logs info message.">Logger.Info()</a> - Logs info (high priority) messages</li>
<li><a class="el" href="d3/d42/class_logger.html#ae942207af5ca8ab1ff17a88066fb3b5a" title="Logs warning message.">Logger.Warning()</a> - Logs warning messages</li>
<li><a class="el" href="d3/d42/class_logger.html#ae7f07bc4e2e2c929458a9d835f127395" title="Logs error message.">Logger.Error()</a> - Logs error messages</li>
</ul>
<p>Please note that <b>all of the methods listed above expect a string</b> as an argument. Arrays and squirrel tables can be logged via <a class="el" href="d3/d42/class_logger.html#aad5c43a07d616a3f08ec0c50dab445f4" title="Logs tables and arrays.">Logger.Table()</a> function which will recursively walk through and log all table members.</p>
<h2><a class="anchor" id="doc_classes"></a>
IdleTTD classes</h2>
<p>Classes used by IdleTTD are listed below.</p>
<h3><a class="anchor" id="doc_main"></a>
MainClass</h3>
<p>GSController for IdleTTD game script. Initializes and/or loads necessary data and sets everything up. Runs script loop and passes game events along for handling.</p>
<ul>
<li><a class="el" href="d5/d5e/class_main_class.html">Class documentation</a></li>
<li><a href="main.nut" target="_blank">File documentation</a></li>
</ul>
<h3><a class="anchor" id="doc_story"></a>
IdleStory</h3>
<p>Class that handles pretty much all of IdleTTD logic.</p><ul>
<li><a class="el" href="d7/d13/class_idle_story.html">Class documentation</a></li>
<li><a href="IdleStory.nut" target="_blank">File documentation</a></li>
</ul>
<h3><a class="anchor" id="doc_pages"></a>
IdlePages</h3>
<p>Class that handles IdleTTD story book page</p><ul>
<li><a class="el" href="da/db4/class_idle_pages.html">Class documentation</a></li>
<li><a href="IdlePages.nut" target="_blank">File documentation</a></li>
</ul>
<h3><a class="anchor" id="doc_util"></a>
IdleUtil</h3>
<p>Class that contains helper and utility methods</p><ul>
<li><a class="el" href="d2/de2/class_idle_util.html">Class documentation</a></li>
<li><a href="IdleUtil.nut" target="_blank">File documentation</a></li>
</ul>
<h3><a class="anchor" id="doc_logger"></a>
Logger</h3>
<p>Class that handles everything related to logging</p><ul>
<li><a class="el" href="d3/d42/class_logger.html">Class documentation</a></li>
<li><a href="Logger.nut" target="_blank">File documentation</a></li>
</ul>
<h1><a class="anchor" id="faq_sec"></a>
FAQ</h1>
<h2><a class="anchor" id="faq_1"></a>
I started a game and nothing happened!</h2>
<p>You have to enable the intro in game script settings. If intro is disabled, seeing nothing is expected for new games.</p>
<h2><a class="anchor" id="faq_2"></a>
I loaded a game and nothing happened!</h2>
<p>Make sure you have built a Company HQ and at have at least one vehicle running.</p>
<h2><a class="anchor" id="faq_3"></a>
I can't close idle report window!</h2>
<p>Idle report window is meant to be closed by clicking the button within (applying idle balance change in the process). If you close it any other way it will just pop up again.</p>
<h2><a class="anchor" id="faq_4"></a>
I loaded a game and IdleTTD took all my money away!</h2>
<p>Negative idle balance can happen if you lost money a year before game was saved. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
