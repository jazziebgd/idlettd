<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>IdleTTD: MainClass Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">IdleTTD<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">IdleTTD - a gamescript for OpenTTD</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d5/d5e/class_main_class.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="../../de/d71/class_main_class-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MainClass Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>IdleTTD GSController instance.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for MainClass:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d5e/class_main_class.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">IdleTTD functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These functions might be called from main <code>while</code> loop in <a class="el" href="#aa67f6b04db7ba147cbefcde69e1b9cb7" title="Script &quot;main thread&quot; start.">Start</a>, depending on game state. </p>
</div></td></tr>
<tr class="memitem:a23e740b91ea3e75b77cbf6fb1e951920" id="r_a23e740b91ea3e75b77cbf6fb1e951920"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23e740b91ea3e75b77cbf6fb1e951920">HandleEvents</a> ()</td></tr>
<tr class="memdesc:a23e740b91ea3e75b77cbf6fb1e951920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that processes all game events.  <br /></td></tr>
<tr class="separator:a23e740b91ea3e75b77cbf6fb1e951920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc9410032f9d978855912406205960b" id="r_a3bc9410032f9d978855912406205960b"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bc9410032f9d978855912406205960b">StartIdle</a> ()</td></tr>
<tr class="memdesc:a3bc9410032f9d978855912406205960b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts up IdleTTD game script for current game session.  <br /></td></tr>
<tr class="separator:a3bc9410032f9d978855912406205960b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Script controller lifecycle</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These functions are called by OpenTTD and are part of game script lifecycle </p>
</div></td></tr>
<tr class="memitem:aa67f6b04db7ba147cbefcde69e1b9cb7" id="r_aa67f6b04db7ba147cbefcde69e1b9cb7"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa67f6b04db7ba147cbefcde69e1b9cb7">Start</a> ()</td></tr>
<tr class="memdesc:aa67f6b04db7ba147cbefcde69e1b9cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Script "main thread" start.  <br /></td></tr>
<tr class="separator:aa67f6b04db7ba147cbefcde69e1b9cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e9d0082e541fe9cf17562f2c99d8d2" id="r_ae0e9d0082e541fe9cf17562f2c99d8d2"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0e9d0082e541fe9cf17562f2c99d8d2">Save</a> ()</td></tr>
<tr class="memdesc:ae0e9d0082e541fe9cf17562f2c99d8d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores script data with saves game.  <br /></td></tr>
<tr class="separator:ae0e9d0082e541fe9cf17562f2c99d8d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181b21da25f355a260072bec6a7b5074" id="r_a181b21da25f355a260072bec6a7b5074"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a181b21da25f355a260072bec6a7b5074">Load</a> (int version, <a class="el" href="../../da/d55/struct_script_saved_data.html">ScriptSavedData</a> tbl)</td></tr>
<tr class="memdesc:a181b21da25f355a260072bec6a7b5074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores saved script data on game load.  <br /></td></tr>
<tr class="separator:a181b21da25f355a260072bec6a7b5074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a01f879c7889cde73e69012e767b012" id="r_a2a01f879c7889cde73e69012e767b012"><td class="memItemLeft" align="right" valign="top">function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a01f879c7889cde73e69012e767b012">UpgradeScriptVersion</a> (int fromVersion, int toVersion)</td></tr>
<tr class="memdesc:a2a01f879c7889cde73e69012e767b012"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upgrades data stored in saved games that ran an older version of IdleTTD.  <br /></td></tr>
<tr class="separator:a2a01f879c7889cde73e69012e767b012"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Persistent members</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These members are used to store <a class="el" href="../../da/d55/struct_script_saved_data.html" title="Script saved data format.">ScriptSavedData</a> with game save and are restored on load. They remain persistent through game sessopms. </p>
</div></td></tr>
<tr class="memitem:a5dc1eb4d9435029b2e315379b4a6926c" id="r_a5dc1eb4d9435029b2e315379b4a6926c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5dc1eb4d9435029b2e315379b4a6926c">PlayerCompanyID</a> = GSCompany.COMPANY_INVALID</td></tr>
<tr class="memdesc:a5dc1eb4d9435029b2e315379b4a6926c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Company ID of the player.  <br /></td></tr>
<tr class="separator:a5dc1eb4d9435029b2e315379b4a6926c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0587e00680f9966d50f61afcada10e0" id="r_af0587e00680f9966d50f61afcada10e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0587e00680f9966d50f61afcada10e0">IdleStoryPageID</a> = GSStoryPage.STORY_PAGE_INVALID</td></tr>
<tr class="memdesc:af0587e00680f9966d50f61afcada10e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Idle story page ID.  <br /></td></tr>
<tr class="separator:af0587e00680f9966d50f61afcada10e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab74a4cf8bfcbf7394eeb7d99302fe13d" id="r_ab74a4cf8bfcbf7394eeb7d99302fe13d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab74a4cf8bfcbf7394eeb7d99302fe13d">LastActiveTime</a> = 0</td></tr>
<tr class="memdesc:ab74a4cf8bfcbf7394eeb7d99302fe13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time of the latest game save.  <br /></td></tr>
<tr class="separator:ab74a4cf8bfcbf7394eeb7d99302fe13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2694001a6a53d1407844a3e951a7a04a" id="r_a2694001a6a53d1407844a3e951a7a04a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2694001a6a53d1407844a3e951a7a04a">LastYearBalance</a> = 0</td></tr>
<tr class="memdesc:a2694001a6a53d1407844a3e951a7a04a"><td class="mdescLeft">&#160;</td><td class="mdescRight">How much money did company lose or earn last year.  <br /></td></tr>
<tr class="separator:a2694001a6a53d1407844a3e951a7a04a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc9ab915d1481eed03c0d0dce005be7" id="r_acbc9ab915d1481eed03c0d0dce005be7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbc9ab915d1481eed03c0d0dce005be7">PrevCurrentCash</a> = 0</td></tr>
<tr class="memdesc:acbc9ab915d1481eed03c0d0dce005be7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Company cash in previous year.  <br /></td></tr>
<tr class="separator:acbc9ab915d1481eed03c0d0dce005be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c744a97dafe10920645814a092e687a" id="r_a9c744a97dafe10920645814a092e687a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c744a97dafe10920645814a092e687a">SecondToLastYearBalance</a> = 0</td></tr>
<tr class="memdesc:a9c744a97dafe10920645814a092e687a"><td class="mdescLeft">&#160;</td><td class="mdescRight">How much money did company lose or earn in the second to last year.  <br /></td></tr>
<tr class="separator:a9c744a97dafe10920645814a092e687a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bf866ad06cf3a80b876c583c5b1c945" id="r_a1bf866ad06cf3a80b876c583c5b1c945"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bf866ad06cf3a80b876c583c5b1c945">SavedScriptVersion</a> = 0</td></tr>
<tr class="memdesc:a1bf866ad06cf3a80b876c583c5b1c945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of the script in saved game.  <br /></td></tr>
<tr class="separator:a1bf866ad06cf3a80b876c583c5b1c945"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>IdleTTD GSController instance. </p>
<p>IdleTTD game script controller class that runs script main loop. Waits for valid company id first to set up an instance of <a class="el" href="../../d7/d13/class_idle_story.html" title="Class that contains main IdleTTD code.">IdleStory</a> </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a23e740b91ea3e75b77cbf6fb1e951920" name="a23e740b91ea3e75b77cbf6fb1e951920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e740b91ea3e75b77cbf6fb1e951920">&#9670;&#160;</a></span>HandleEvents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::HandleEvents </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that processes all game events. </p>
<p>Iterates through eventual waiting events from <a href="https://docs.openttd.org/gs-api/classGSEventController" target="_blank">GSEventController</a> and handles them if needed. Two types of events are handled in IdleTTD:</p><ul>
<li>Function first awaits for event with type <a href="https://docs.openttd.org/gs-api/classGSEvent" target="_blank">GSEvent.ET_COMPANY_NEW</a> and valid company id to set required property <a class="el" href="#a5dc1eb4d9435029b2e315379b4a6926c">this.PlayerCompanyID</a>.</li>
<li>Function will pass click events of type <a href="https://docs.openttd.org/gs-api/classGSEvent" target="_blank">GSEvent.ET_STORYPAGE_BUTTON_CLICK</a> originating from idle story boook page to <a class="el" href="../../d7/d13/class_idle_story.html#a747985d06b5102dc5ed52b01846e5163">IdleStory.HandleButtonClick()</a> for handling.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">false</td><td>Script should skip next loop iteration in order for game to react faster to state changes, clicks etc. </td></tr>
    <tr><td class="paramname">true</td><td>Script loop should be processed normally </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3bc9410032f9d978855912406205960b" name="a3bc9410032f9d978855912406205960b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc9410032f9d978855912406205960b">&#9670;&#160;</a></span>StartIdle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::StartIdle </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts up IdleTTD game script for current game session. </p>
<p>Sets up game script data and idle story book page. Shows story book page with intro (based on settings) when new game starts or with idle report when save game is loaded.</p>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="aa67f6b04db7ba147cbefcde69e1b9cb7" name="aa67f6b04db7ba147cbefcde69e1b9cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67f6b04db7ba147cbefcde69e1b9cb7">&#9670;&#160;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::Start </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Script "main thread" start. </p>
<p>This function is called by OpenTTD upon starting new or loading saved game with IdleTTD enabled.</p>
<p>Function will first set up everything:</p>
<ol type="1">
<li>Wait for valid company</li>
<li>initialize IdleTTD<ul>
<li>If game was loaded, apply saved data</li>
<li>If new game was started initialize defaults data</li>
</ul>
</li>
</ol>
<p>and then start running its standard tick loop.</p>
<dl class="section attention"><dt>Attention</dt><dd>OpenTTD will consider that script had crashed if this function ever returns. The <code>while</code> loop in this function should never stop iterating.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="ae0e9d0082e541fe9cf17562f2c99d8d2" name="ae0e9d0082e541fe9cf17562f2c99d8d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e9d0082e541fe9cf17562f2c99d8d2">&#9670;&#160;</a></span>Save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::Save </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores script data with saves game. </p>
<p>Prepares data desribing current game script state and returns it for storing in saves games.</p>
<p>Returned data is a table in the format defined by <a class="el" href="../../da/d55/struct_script_saved_data.html" title="Script saved data format.">ScriptSavedData</a>.</p>
<ul>
<li><code>PlayerCompanyID</code> Id of current company</li>
<li><code>IdleStoryPageID</code> Id of current idle story page</li>
<li><code>LastActiveTime</code> Unix timestamp that stores exact save game time</li>
<li><code>LastYearBalance</code> Amount of money company earned or lost last year</li>
<li><code>SecondToLastYearBalance</code> Amount of money company earned or lost in second to last year</li>
<li><code>PrevCurrentCash</code> Amount of money company had at the beginning of current year</li>
<li><code>SavedScriptVersion</code> IdleTTD version that game is being saved with</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Function sets SavedDate property that is used when determining whether the save was autosave or manual one.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="../../da/d55/struct_script_saved_data.html" title="Script saved data format.">ScriptSavedData</a> Script state data for saving </dd></dl>

</div>
</div>
<a id="a181b21da25f355a260072bec6a7b5074" name="a181b21da25f355a260072bec6a7b5074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a181b21da25f355a260072bec6a7b5074">&#9670;&#160;</a></span>Load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::Load </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>version</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d55/struct_script_saved_data.html">ScriptSavedData</a></td>          <td class="paramname"><span class="paramname"><em>tbl</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores saved script data on game load. </p>
<p>Called just before <a class="el" href="#aa67f6b04db7ba147cbefcde69e1b9cb7" title="Script &quot;main thread&quot; start.">Start</a>, used to restore saved IdleTTD data. </p><dl class="section note"><dt>Note</dt><dd>Values for <code>PlayerCompanyID</code> and <code>IdleStoryPageId</code> are always present, other two can be uninitialized if game has been saved within first couple of years after start.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>integer Script version </td></tr>
    <tr><td class="paramname">tbl</td><td>SquirrelTable Stored data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a id="a2a01f879c7889cde73e69012e767b012" name="a2a01f879c7889cde73e69012e767b012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a01f879c7889cde73e69012e767b012">&#9670;&#160;</a></span>UpgradeScriptVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function MainClass::UpgradeScriptVersion </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>fromVersion</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>toVersion</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upgrades data stored in saved games that ran an older version of IdleTTD. </p>
<p>Currently it doesn't do pretty much anything. Function is called as soon as <a class="el" href="#aa67f6b04db7ba147cbefcde69e1b9cb7">this.Start()</a> starts executing. This is the place to reconcile (future eventual) differences across different script versions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fromVersion</td><td>integer Version to upgrade from (script version from the saved game) </td></tr>
    <tr><td class="paramname">toVersion</td><td>integer Version to upgrade to (latest game script version)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Data upgraded to new version successfully </td></tr>
    <tr><td class="paramname">false</td><td>Failed upgrading data to new script version </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5dc1eb4d9435029b2e315379b4a6926c" name="a5dc1eb4d9435029b2e315379b4a6926c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dc1eb4d9435029b2e315379b4a6926c">&#9670;&#160;</a></span>PlayerCompanyID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::PlayerCompanyID = GSCompany.COMPANY_INVALID</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Company ID of the player. </p>
<p>Although initially set to GSCompany.COMPANY_INVALID, this value gets populated in first couple of ticks in <a class="el" href="#a23e740b91ea3e75b77cbf6fb1e951920" title="Function that processes all game events.">HandleEvents</a> function. </p>

</div>
</div>
<a id="af0587e00680f9966d50f61afcada10e0" name="af0587e00680f9966d50f61afcada10e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0587e00680f9966d50f61afcada10e0">&#9670;&#160;</a></span>IdleStoryPageID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::IdleStoryPageID = GSStoryPage.STORY_PAGE_INVALID</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Idle story page ID. </p>
<p>Temporary internal storage for company ids loaded with saved games </p>

</div>
</div>
<a id="ab74a4cf8bfcbf7394eeb7d99302fe13d" name="ab74a4cf8bfcbf7394eeb7d99302fe13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74a4cf8bfcbf7394eeb7d99302fe13d">&#9670;&#160;</a></span>LastActiveTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::LastActiveTime = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time of the latest game save. </p>
<p>Unix timestamp that keeps track when the game was saved last time </p>

</div>
</div>
<a id="a2694001a6a53d1407844a3e951a7a04a" name="a2694001a6a53d1407844a3e951a7a04a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2694001a6a53d1407844a3e951a7a04a">&#9670;&#160;</a></span>LastYearBalance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::LastYearBalance = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How much money did company lose or earn last year. </p>
<p>Value that keeps track of last year balance changes </p>

</div>
</div>
<a id="acbc9ab915d1481eed03c0d0dce005be7" name="acbc9ab915d1481eed03c0d0dce005be7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc9ab915d1481eed03c0d0dce005be7">&#9670;&#160;</a></span>PrevCurrentCash</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::PrevCurrentCash = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Company cash in previous year. </p>
<p>How much money did company have at the start of current year </p>

</div>
</div>
<a id="a9c744a97dafe10920645814a092e687a" name="a9c744a97dafe10920645814a092e687a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c744a97dafe10920645814a092e687a">&#9670;&#160;</a></span>SecondToLastYearBalance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::SecondToLastYearBalance = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How much money did company lose or earn in the second to last year. </p>
<p>Value that keeps track of second to last year balance changes </p>

</div>
</div>
<a id="a1bf866ad06cf3a80b876c583c5b1c945" name="a1bf866ad06cf3a80b876c583c5b1c945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf866ad06cf3a80b876c583c5b1c945">&#9670;&#160;</a></span>SavedScriptVersion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainClass::SavedScriptVersion = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of the script in saved game. </p>
<p>Version of the game script that is being loaded with saved game </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d5/d5e/class_main_class.html">MainClass</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
