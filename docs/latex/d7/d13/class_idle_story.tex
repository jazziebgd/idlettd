\doxysection{Idle\+Story Class Reference}
\hypertarget{class_idle_story}{}\label{class_idle_story}\index{IdleStory@{IdleStory}}


Class that contains main Idle\+TTD code.  


\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
constructor \mbox{\hyperlink{class_idle_story_a8418ce0df004f41687045eea9f5bf7ff}{Idle\+Story}} (int company\+ID, int story\+Page\+ID=GSStory\+Page.\+STORY\+\_\+\+PAGE\+\_\+\+INVALID)
\begin{DoxyCompactList}\small\item\em Class constructor. Requires valid company id. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Initialization and lifecycle}\par
{\em Functions below are setting up and starting base script functionality }\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{class_idle_story_a4ee746cb12cc6874510439575f85a999}{Initialize}} (int last\+Active\+Time, int last\+Year\+Balance, int second\+To\+Last\+Year\+Balance, int int\+Current\+Cash)
\begin{DoxyCompactList}\small\item\em Initializes game session. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a25e40930a26ac9f78dd42706ad8f3cf5}{run\+Idle\+Loop}} ()
\begin{DoxyCompactList}\small\item\em Executes one game script iteration. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a747985d06b5102dc5ed52b01846e5163}{Handle\+Button\+Click}} (int button\+Id, GSEvent\+Story\+Page\+Button\+Click event)
\begin{DoxyCompactList}\small\item\em Handles button clicks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Functions that manage story book pages}\par
{\em These functions prepare data and call \doxylink{class_idle_pages}{Idle\+Pages} instance to manage story book page screens }\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{class_idle_story_a58fce52265f3b1a7669058a2d6d7f542}{Get\+Page\+ID}} ()
\begin{DoxyCompactList}\small\item\em Guaranteed to return (creates it if needed) valid current idle story page ID. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a4d5e40cdb668941d25303102866d38f4}{Show\+Idle\+Report}} (int int\+New\+Idle\+Balance=0)
\begin{DoxyCompactList}\small\item\em Shows idle report screen. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_aaa8c67c06658ddf3e999d7924dec8a35}{Show\+Stats\+Screen}} ()
\begin{DoxyCompactList}\small\item\em Shows stats screen. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_af4dd48131a632e7e2d551712921dc2fd}{Show\+Save\+Warning\+Screen}} ()
\begin{DoxyCompactList}\small\item\em Shows save warning screen. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a396d3466ec2cd0f415c5dab978a4b17e}{Render\+Stats\+Screen}} ()
\begin{DoxyCompactList}\small\item\em Renders stats screen. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a349428cbfc386c53a17520c8c0b7a27a}{Update\+Duration}} ()
\begin{DoxyCompactList}\small\item\em Updates duration text. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a500fa9afeb6c28147de926112da25d91}{Update\+Report\+Close\+Warning}} (bool bool\+Show\+Warning=true)
\begin{DoxyCompactList}\small\item\em Updates warning text on idle report screen. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a6817c405df22e242646b903930e144f1}{Update\+Report\+Save\+Warning}} (bool bool\+Show\+Warning=true)
\begin{DoxyCompactList}\small\item\em Updates save warning element on idle report screen. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ News management functions}\par
{\em Functions that show and manage in-\/game news }\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{class_idle_story_aa557428df21d229ec98191c4e485b74b}{Show\+Idle\+Balance\+News}} (int balance\+Change)
\begin{DoxyCompactList}\small\item\em Displays news about idle balance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Company and stats members}\par
{\em Functions that calculate stats and perform company related tasks }\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{class_idle_story_a5ebbc3449e9db49d30910ba531f7072a}{Set\+Last\+Year\+Balance}} (int value=0)
\begin{DoxyCompactList}\small\item\em Stores last year balance. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_ace351584ef5dbdaab7c63520ee340a76}{Set\+Last\+Inactive\+Seconds}} (int value=0)
\begin{DoxyCompactList}\small\item\em Stores last inactive seconds. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a7aad523bd5f2c3634482aad2dd66bed2}{Calculate\+Idle\+Balance}} ()
\begin{DoxyCompactList}\small\item\em Calculates latest idle balance. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_ab28a579eebace91e5c8f9eb988aff6d8}{Get\+Current\+Cash}} (bool bool\+Ignore\+Loan=false)
\begin{DoxyCompactList}\small\item\em Returns bank balance for player. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a4463aa3d8cfd2316b7f3a784d11cefa4}{Change\+Bank\+Balance}} (int balance\+Change=0)
\begin{DoxyCompactList}\small\item\em Changes company bank balance. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a929e5de04581c624b717751cc2d4bceb}{Scroll\+To\+Company\+HQ}} ()
\begin{DoxyCompactList}\small\item\em Scrolls to HQ. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a9c76727439a2fee352425103d9bc1c2f}{Get\+Summary\+Vehicle\+Stats}} (bool force=false)
\begin{DoxyCompactList}\small\item\em Returns summary stats for all vehicles. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_ae6f1020275c85f032107fd7853fc1c58}{Get\+All\+Vehicle\+Type\+Stats}} (bool force=false)
\begin{DoxyCompactList}\small\item\em Returns vehicle stats grouped by type. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_ab818e77714f4fa33ae381d8e9db81c2f}{Get\+Vehicle\+Type\+Stats}} (int vehicle\+Type, bool force=false)
\begin{DoxyCompactList}\small\item\em Returns summary stats vehicles of given type. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Utility members}\par
{\em Common utility and helper functions that are too specific for util class }\begin{DoxyCompactItemize}
\item 
function \mbox{\hyperlink{class_idle_story_a6130daf1b2acf9807ceb2f5795ab0cb6}{Enter\+Company\+Mode}} ()
\begin{DoxyCompactList}\small\item\em Enters company mode. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a26677bef40de4e35f4823c93aaeda000}{Leave\+Company\+Mode}} ()
\begin{DoxyCompactList}\small\item\em Leaves company mode. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a9b84852c6e561b881bffcf8c4b125d95}{Cache\+Vehicle\+Stats}} (bool force=false)
\begin{DoxyCompactList}\small\item\em Refreshes vehicle stats cache. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_aeb29563c3ce66f4f2ed0d73aea35404a}{Is\+Idle\+Report\+Visible}} ()
\begin{DoxyCompactList}\small\item\em Check if idle report is visible. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_ad9f8742608871086c9bbeb6a1bbb525d}{Is\+Save\+Warning\+Screen\+Visible}} ()
\begin{DoxyCompactList}\small\item\em Check if save warning screen is visible. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a624cde95da757d9c703c6b2e3755cbcb}{Is\+Save\+Warning\+Text\+Displayed}} ()
\begin{DoxyCompactList}\small\item\em Check if save warning text is added to report. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a7fb967d2ee9367e75f4492b7e8d69fbc}{Game\+Saved\+With\+Negative\+Balance}} ()
\begin{DoxyCompactList}\small\item\em Check if game was saved with negative balance. \end{DoxyCompactList}\item 
function \mbox{\hyperlink{class_idle_story_a4a84dc1198fd1131a1c193a52c30ced2}{Is\+Any\+Screen\+Open}} ()
\begin{DoxyCompactList}\small\item\em Check if anything is visible. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\doxysubsubsection*{Public Attributes}
\begin{Indent}\textbf{ Local class instances}\par
{\em Properties below reference instances of classes created here (currently only \doxylink{class_idle_pages}{Idle\+Pages}). }\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589}{Idle\+Pages\+Instance}} = null
\begin{DoxyCompactList}\small\item\em Reference to idle pages class instance. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\doxysubsubsection*{State variables}
Properties below represent the state of the current Idle\+TTD session \begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_idle_story_aa25635a0c58eab0462d38a65727e0688}{Player\+Company\+ID}} = GSCompany.\+COMPANY\+\_\+\+INVALID
\begin{DoxyCompactList}\small\item\em Player company ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_idle_story_a0594404e1c9686b50d70b46b24769b74}{Idle\+Story\+Page\+ID}} = GSStory\+Page.\+STORY\+\_\+\+PAGE\+\_\+\+INVALID
\begin{DoxyCompactList}\small\item\em Idle story book page ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_idle_story_a343f1d94ad57bc0e6f00d9a34e6f3246}{Idle\+Balance}} = 0
\begin{DoxyCompactList}\small\item\em Latest idle balance. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_idle_story_a6aac23fcac191fb9f818da83393c7b66}{Current\+Cash}} = 0
\begin{DoxyCompactList}\small\item\em Amount of cash company has. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_idle_story_a4a91a8cb3a6437f0508783a173924e72}{Previous\+Month}} = -\/1
\begin{DoxyCompactList}\small\item\em Latest in-\/game month detected. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_idle_story_a540485a4cdf5d8309a672f02ea3b062c}{company\+Mode}} = null
\begin{DoxyCompactList}\small\item\em Company mode (null if not active) \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class that contains main Idle\+TTD code. 

Once created and started in \doxylink{class_main_class_aa67f6b04db7ba147cbefcde69e1b9cb7}{Main\+Class.\+Start()}, internally tracks all data and handles all relevant button click events. 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00018}{18}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_idle_story_a8418ce0df004f41687045eea9f5bf7ff}\label{class_idle_story_a8418ce0df004f41687045eea9f5bf7ff} 
\index{IdleStory@{IdleStory}!IdleStory@{IdleStory}}
\index{IdleStory@{IdleStory}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IdleStory()}{IdleStory()}}
{\footnotesize\ttfamily constructor Idle\+Story\+::\+Idle\+Story (\begin{DoxyParamCaption}\item[{int}]{company\+ID,  }\item[{int}]{story\+Page\+ID = {\ttfamily GSStoryPage.STORY\+\_\+PAGE\+\_\+INVALID} }\end{DoxyParamCaption})}



Class constructor. Requires valid company id. 

Valid Company ID is required, but page ID is not.
\begin{DoxyItemize}
\item When new game starts constructor is called without page ID. Story book page gets created and its id is then stored with saved games to be reused.
\item If game was loaded, \doxylink{class_main_class}{Main\+Class} will pass existing story book page ID to the constructor.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em company\+ID} & Player company ID \\
\hline
{\em story\+Page\+ID} & Idle story book page ID \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00194}{194}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{class_idle_story_a4ee746cb12cc6874510439575f85a999}\label{class_idle_story_a4ee746cb12cc6874510439575f85a999} 
\index{IdleStory@{IdleStory}!Initialize@{Initialize}}
\index{Initialize@{Initialize}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{Initialize()}{Initialize()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Initialize (\begin{DoxyParamCaption}\item[{int}]{last\+Active\+Time,  }\item[{int}]{last\+Year\+Balance,  }\item[{int}]{second\+To\+Last\+Year\+Balance,  }\item[{int}]{int\+Current\+Cash }\end{DoxyParamCaption})}



Initializes game session. 

Called when all argument values are either loaded from saved game or set to default values (zeros) for new games. Shows idle report / missing hq / intro screen as needed.


\begin{DoxyParams}{Parameters}
{\em last\+Active\+Time} & Saved game timestamp, stored locally as \+\_\+\+Last\+Active\+Time \\
\hline
{\em last\+Year\+Balance} & Saved last year balance, stored locally as \+\_\+\+Last\+Year\+Balance \\
\hline
{\em second\+To\+Last\+Year\+Balance} & Saved second to last year balance, stored locally as \+\_\+\+Second\+To\+Last\+Year\+Balance \\
\hline
{\em int\+Current\+Cash} & Amount of money (minus loan) that company had at the end of the last (complete) year\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00236}{236}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a25e40930a26ac9f78dd42706ad8f3cf5}\label{class_idle_story_a25e40930a26ac9f78dd42706ad8f3cf5} 
\index{IdleStory@{IdleStory}!runIdleLoop@{runIdleLoop}}
\index{runIdleLoop@{runIdleLoop}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{runIdleLoop()}{runIdleLoop()}}
{\footnotesize\ttfamily function Idle\+Story\+::run\+Idle\+Loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Executes one game script iteration. 

This is the code that executes Idle\+TTD specific stuff whenever the game runs the script.

First time in a year this gets called (preferably Jan 1st) it will store the amount of money company has. If there was a value stored for previous year, it is used to calculate balance for current year before it gets overwritten. This balance serves as a basis for idle balance calculations. \begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00279}{279}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a747985d06b5102dc5ed52b01846e5163}\label{class_idle_story_a747985d06b5102dc5ed52b01846e5163} 
\index{IdleStory@{IdleStory}!HandleButtonClick@{HandleButtonClick}}
\index{HandleButtonClick@{HandleButtonClick}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{HandleButtonClick()}{HandleButtonClick()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Handle\+Button\+Click (\begin{DoxyParamCaption}\item[{int}]{button\+Id,  }\item[{GSEvent\+Story\+Page\+Button\+Click}]{event }\end{DoxyParamCaption})}



Handles button clicks. 

Called for events of type GSEvent\+::\+ET\+\_\+\+STORYPAGE\+\_\+\+BUTTON\+\_\+\+CLICK whenever a button on idle story book page is clicked.

\begin{DoxyNote}{Note}
Handlers are called once per script iteration. This method can be called up to 7 in-\/game days (\texorpdfstring{$\sim$}{\string~}15.5s) after the actual click itself.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em button\+Id} & Button story page element ID \\
\hline
{\em event} & Converted event that triggered the handler\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00326}{326}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a58fce52265f3b1a7669058a2d6d7f542}\label{class_idle_story_a58fce52265f3b1a7669058a2d6d7f542} 
\index{IdleStory@{IdleStory}!GetPageID@{GetPageID}}
\index{GetPageID@{GetPageID}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GetPageID()}{GetPageID()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Get\+Page\+ID (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Guaranteed to return (creates it if needed) valid current idle story page ID. 

Makes sure there is a valid idle story page or creates it if there isn\textquotesingle{}t and then returns its ID as \href{https://docs.openttd.org/gs-api/classGSStoryPage}{\texttt{ GSStory\+Page.\+Story\+Page\+ID}}.

\begin{DoxyPrecond}{Precondition}
{\bfseries{Local company ID valid}} 

this.\+Player\+Company\+ID != GSCompany.\+COMPANY\+\_\+\+INVALID
\end{DoxyPrecond}
\begin{DoxyReturn}{Returns}
GSStory\+Page\+ID Idle story page ID 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00411}{411}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a4d5e40cdb668941d25303102866d38f4}\label{class_idle_story_a4d5e40cdb668941d25303102866d38f4} 
\index{IdleStory@{IdleStory}!ShowIdleReport@{ShowIdleReport}}
\index{ShowIdleReport@{ShowIdleReport}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ShowIdleReport()}{ShowIdleReport()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Show\+Idle\+Report (\begin{DoxyParamCaption}\item[{int}]{int\+New\+Idle\+Balance = {\ttfamily 0} }\end{DoxyParamCaption})}



Shows idle report screen. 

Calculats idle balance and calls \doxylink{class_idle_pages_a95d7f4e8350713bafbd44a153ad5c9b9}{Show\+Idle\+Report\+Screen()} on \doxylink{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589}{this.Idle\+Pages\+Instance} to show idle report screen on idle story book page. \begin{DoxyNote}{Note}
Idle report page is {\itshape quasi-\/persistent}. If player closes story book without clicking the button within, script will open idle report story book page again and keep doing it until player clicks the button on the page.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em int\+New\+Idle\+Balance} & New idle balance\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Idle report story book page is displayed \\
\hline
{\em false} & Failed opening idle report story book page \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00441}{441}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_aaa8c67c06658ddf3e999d7924dec8a35}\label{class_idle_story_aaa8c67c06658ddf3e999d7924dec8a35} 
\index{IdleStory@{IdleStory}!ShowStatsScreen@{ShowStatsScreen}}
\index{ShowStatsScreen@{ShowStatsScreen}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ShowStatsScreen()}{ShowStatsScreen()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Show\+Stats\+Screen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Shows stats screen. 

Prepares required data and calls \doxylink{class_idle_pages_aed0b5efd40481d9b3f12128d2f34e827}{Show\+Stats\+Screen()} on \doxylink{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589}{this.Idle\+Pages\+Instance} to show stats screen.

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Story book page displayed successfully \\
\hline
{\em false} & Failed displaying story book page \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00461}{461}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_af4dd48131a632e7e2d551712921dc2fd}\label{class_idle_story_af4dd48131a632e7e2d551712921dc2fd} 
\index{IdleStory@{IdleStory}!ShowSaveWarningScreen@{ShowSaveWarningScreen}}
\index{ShowSaveWarningScreen@{ShowSaveWarningScreen}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ShowSaveWarningScreen()}{ShowSaveWarningScreen()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Show\+Save\+Warning\+Screen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Shows save warning screen. 

When player saves the game with negative balance show a warning notifying them of idle losses

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Story book page displayed successfully \\
\hline
{\em false} & Failed displaying story book page \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00475}{475}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a396d3466ec2cd0f415c5dab978a4b17e}\label{class_idle_story_a396d3466ec2cd0f415c5dab978a4b17e} 
\index{IdleStory@{IdleStory}!RenderStatsScreen@{RenderStatsScreen}}
\index{RenderStatsScreen@{RenderStatsScreen}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{RenderStatsScreen()}{RenderStatsScreen()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Render\+Stats\+Screen (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Renders stats screen. 

Prepares required data and calls \doxylink{class_idle_pages_a0631c47910518f768f2956a4e37d36be}{Render\+Stats\+Screen()} on \doxylink{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589}{this.Idle\+Pages\+Instance} to render stats screen without opening story book page.

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00489}{489}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a349428cbfc386c53a17520c8c0b7a27a}\label{class_idle_story_a349428cbfc386c53a17520c8c0b7a27a} 
\index{IdleStory@{IdleStory}!UpdateDuration@{UpdateDuration}}
\index{UpdateDuration@{UpdateDuration}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{UpdateDuration()}{UpdateDuration()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Update\+Duration (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Updates duration text. 

If \doxylink{class_idle_pages_af787039a4b1e6ab82378f3eee36901f5}{this.Idle\+Pages\+Instance.Previous\+Duration\+Element\+ID} is valid it gets updated with duration text formatted for current time -\/ last active time

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Duration story page element updated \\
\hline
{\em false} & Failed updating duration story page element \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00504}{504}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a500fa9afeb6c28147de926112da25d91}\label{class_idle_story_a500fa9afeb6c28147de926112da25d91} 
\index{IdleStory@{IdleStory}!UpdateReportCloseWarning@{UpdateReportCloseWarning}}
\index{UpdateReportCloseWarning@{UpdateReportCloseWarning}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{UpdateReportCloseWarning()}{UpdateReportCloseWarning()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Update\+Report\+Close\+Warning (\begin{DoxyParamCaption}\item[{bool}]{bool\+Show\+Warning = {\ttfamily true} }\end{DoxyParamCaption})}



Updates warning text on idle report screen. 

Shows or hides text warning player about closing idle report window via button only.


\begin{DoxyParams}{Parameters}
{\em bool\+Show\+Warning} & Controls whether to show the warning or not\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Warning story page element updated \\
\hline
{\em false} & Failed updating warning story page element \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00520}{520}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a6817c405df22e242646b903930e144f1}\label{class_idle_story_a6817c405df22e242646b903930e144f1} 
\index{IdleStory@{IdleStory}!UpdateReportSaveWarning@{UpdateReportSaveWarning}}
\index{UpdateReportSaveWarning@{UpdateReportSaveWarning}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{UpdateReportSaveWarning()}{UpdateReportSaveWarning()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Update\+Report\+Save\+Warning (\begin{DoxyParamCaption}\item[{bool}]{bool\+Show\+Warning = {\ttfamily true} }\end{DoxyParamCaption})}



Updates save warning element on idle report screen. 

Shows or hides text warning player about saving the game with negative balance


\begin{DoxyParams}{Parameters}
{\em bool\+Show\+Warning} & Controls whether to show save warning or not\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Save warning story page element updated \\
\hline
{\em false} & Failed updating save warning story page element \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00534}{534}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_aa557428df21d229ec98191c4e485b74b}\label{class_idle_story_aa557428df21d229ec98191c4e485b74b} 
\index{IdleStory@{IdleStory}!ShowIdleBalanceNews@{ShowIdleBalanceNews}}
\index{ShowIdleBalanceNews@{ShowIdleBalanceNews}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ShowIdleBalanceNews()}{ShowIdleBalanceNews()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Show\+Idle\+Balance\+News (\begin{DoxyParamCaption}\item[{int}]{balance\+Change }\end{DoxyParamCaption})}



Displays news about idle balance. 

If script settings allow, creates and displays a news story about account balance changes caused by Idle\+TTD


\begin{DoxyParams}{Parameters}
{\em balance\+Change} & Amount of money added or removed from company bank account\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & News created successfully \\
\hline
{\em false} & Failed creating news \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00558}{558}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a5ebbc3449e9db49d30910ba531f7072a}\label{class_idle_story_a5ebbc3449e9db49d30910ba531f7072a} 
\index{IdleStory@{IdleStory}!SetLastYearBalance@{SetLastYearBalance}}
\index{SetLastYearBalance@{SetLastYearBalance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{SetLastYearBalance()}{SetLastYearBalance()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Set\+Last\+Year\+Balance (\begin{DoxyParamCaption}\item[{int}]{value = {\ttfamily 0} }\end{DoxyParamCaption})}



Stores last year balance. 

Updates \+\_\+\+Second\+To\+Last\+Year\+Balance with previous value of \+\_\+\+Last\+Year\+Balance before setting \+\_\+\+Last\+Year\+Balance to new value


\begin{DoxyParams}{Parameters}
{\em value} & New balance\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00592}{592}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_ace351584ef5dbdaab7c63520ee340a76}\label{class_idle_story_ace351584ef5dbdaab7c63520ee340a76} 
\index{IdleStory@{IdleStory}!SetLastInactiveSeconds@{SetLastInactiveSeconds}}
\index{SetLastInactiveSeconds@{SetLastInactiveSeconds}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{SetLastInactiveSeconds()}{SetLastInactiveSeconds()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Set\+Last\+Inactive\+Seconds (\begin{DoxyParamCaption}\item[{int}]{value = {\ttfamily 0} }\end{DoxyParamCaption})}



Stores last inactive seconds. 

Based on \+\_\+\+Last\+Active\+Time, this value is stored for using in strings and calculations


\begin{DoxyParams}{Parameters}
{\em value} & New value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00607}{607}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a7aad523bd5f2c3634482aad2dd66bed2}\label{class_idle_story_a7aad523bd5f2c3634482aad2dd66bed2} 
\index{IdleStory@{IdleStory}!CalculateIdleBalance@{CalculateIdleBalance}}
\index{CalculateIdleBalance@{CalculateIdleBalance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{CalculateIdleBalance()}{CalculateIdleBalance()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Calculate\+Idle\+Balance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Calculates latest idle balance. 

Based on latest year balance, idle multiplier setting and time passed since saving the game, function calculates and returns amount that should be added or subtracted from company bank balance.

\begin{DoxyReturn}{Returns}
integer Amount of money company earned or lost since last time game was saved. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00617}{617}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_ab28a579eebace91e5c8f9eb988aff6d8}\label{class_idle_story_ab28a579eebace91e5c8f9eb988aff6d8} 
\index{IdleStory@{IdleStory}!GetCurrentCash@{GetCurrentCash}}
\index{GetCurrentCash@{GetCurrentCash}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GetCurrentCash()}{GetCurrentCash()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Get\+Current\+Cash (\begin{DoxyParamCaption}\item[{bool}]{bool\+Ignore\+Loan = {\ttfamily false} }\end{DoxyParamCaption})}



Returns bank balance for player. 

Can include loans


\begin{DoxyParams}{Parameters}
{\em bool\+Ignore\+Loan} & Ignore loan \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Cash balance 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00637}{637}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a4463aa3d8cfd2316b7f3a784d11cefa4}\label{class_idle_story_a4463aa3d8cfd2316b7f3a784d11cefa4} 
\index{IdleStory@{IdleStory}!ChangeBankBalance@{ChangeBankBalance}}
\index{ChangeBankBalance@{ChangeBankBalance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ChangeBankBalance()}{ChangeBankBalance()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Change\+Bank\+Balance (\begin{DoxyParamCaption}\item[{int}]{balance\+Change = {\ttfamily 0} }\end{DoxyParamCaption})}



Changes company bank balance. 

Adds (or subtracts) balance\+Change amount from company bank balance. Creates news with details if balance change was successful.

\begin{DoxyPrecond}{Precondition}
{\bfseries{Local company ID valid}} 

this.\+Player\+Company\+ID != GSCompany.\+COMPANY\+\_\+\+INVALID 

{\bfseries{Argument precondition}} 

{\itshape balance\+Change} {\bfseries{!=}} {\ttfamily 0}
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em balance\+Change} & Amount to add or subtract from company bank balance\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Balance changed successfully \\
\hline
{\em false} & Balance change failed \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00665}{665}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a929e5de04581c624b717751cc2d4bceb}\label{class_idle_story_a929e5de04581c624b717751cc2d4bceb} 
\index{IdleStory@{IdleStory}!ScrollToCompanyHQ@{ScrollToCompanyHQ}}
\index{ScrollToCompanyHQ@{ScrollToCompanyHQ}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{ScrollToCompanyHQ()}{ScrollToCompanyHQ()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Scroll\+To\+Company\+HQ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Scrolls to HQ. 

Centers viewport on company hq tile if hq is built

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00683}{683}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a9c76727439a2fee352425103d9bc1c2f}\label{class_idle_story_a9c76727439a2fee352425103d9bc1c2f} 
\index{IdleStory@{IdleStory}!GetSummaryVehicleStats@{GetSummaryVehicleStats}}
\index{GetSummaryVehicleStats@{GetSummaryVehicleStats}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GetSummaryVehicleStats()}{GetSummaryVehicleStats()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Get\+Summary\+Vehicle\+Stats (\begin{DoxyParamCaption}\item[{bool}]{force = {\ttfamily false} }\end{DoxyParamCaption})}



Returns summary stats for all vehicles. 

Iterates through all vehicle types and summarizes stats (count, balance, idle\+Balance) for them. Values are per in-\/game year

\begin{DoxyPrecond}{Precondition}
{\bfseries{Valid player company}} 

this.\+Player\+Company\+ID != GSCompany.\+COMPANY\+\_\+\+INVALID 

GSCompany.\+Resolve\+Company\+ID(this.\+Player\+Company\+ID) == this.\+Player\+Company\+ID
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em force} & Force refreshing cached stats\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SQTable Summary stats table 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00705}{705}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_ae6f1020275c85f032107fd7853fc1c58}\label{class_idle_story_ae6f1020275c85f032107fd7853fc1c58} 
\index{IdleStory@{IdleStory}!GetAllVehicleTypeStats@{GetAllVehicleTypeStats}}
\index{GetAllVehicleTypeStats@{GetAllVehicleTypeStats}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GetAllVehicleTypeStats()}{GetAllVehicleTypeStats()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Get\+All\+Vehicle\+Type\+Stats (\begin{DoxyParamCaption}\item[{bool}]{force = {\ttfamily false} }\end{DoxyParamCaption})}



Returns vehicle stats grouped by type. 

Iterates through all vehicle types and summarizes stats (count, balance, idle\+Balance) for them (per type). Values are per in-\/game year.

\begin{DoxyPrecond}{Precondition}
{\bfseries{Valid player company}} 

this.\+Player\+Company\+ID != GSCompany.\+COMPANY\+\_\+\+INVALID 

GSCompany.\+Resolve\+Company\+ID(this.\+Player\+Company\+ID) == this.\+Player\+Company\+ID
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em force} & Force refreshing cached stats\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::array\texorpdfstring{$<$}{<}\doxylink{struct_vehicle_type_stats_item}{Vehicle\+Type\+Stats\+Item}, 4\texorpdfstring{$>$}{>} An array of summary tables for all four vehicle types 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00725}{725}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_ab818e77714f4fa33ae381d8e9db81c2f}\label{class_idle_story_ab818e77714f4fa33ae381d8e9db81c2f} 
\index{IdleStory@{IdleStory}!GetVehicleTypeStats@{GetVehicleTypeStats}}
\index{GetVehicleTypeStats@{GetVehicleTypeStats}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GetVehicleTypeStats()}{GetVehicleTypeStats()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Get\+Vehicle\+Type\+Stats (\begin{DoxyParamCaption}\item[{int}]{vehicle\+Type,  }\item[{bool}]{force = {\ttfamily false} }\end{DoxyParamCaption})}



Returns summary stats vehicles of given type. 

Iterates through all vehicles of the same type and summarizes stats (count, balance, idle\+Balance) for them. Values are per in-\/game year


\begin{DoxyParams}{Parameters}
{\em vehicle\+Type} & {\ttfamily GSVehicle\+::\+Vehicle\+Type} Vehicle type ID \\
\hline
{\em force} & Force refreshing cached stats\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
SQTable Summary stats table (or null) 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00743}{743}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a6130daf1b2acf9807ceb2f5795ab0cb6}\label{class_idle_story_a6130daf1b2acf9807ceb2f5795ab0cb6} 
\index{IdleStory@{IdleStory}!EnterCompanyMode@{EnterCompanyMode}}
\index{EnterCompanyMode@{EnterCompanyMode}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{EnterCompanyMode()}{EnterCompanyMode()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Enter\+Company\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Enters company mode. 

Enters company mode and keeps local reference \doxylink{class_idle_story_a540485a4cdf5d8309a672f02ea3b062c}{company\+Mode} to leave it later using \doxylink{class_idle_story_a26677bef40de4e35f4823c93aaeda000}{Leave\+Company\+Mode()} function.

Uses {\ttfamily GSCompany\+Mode}, see \href{https://docs.openttd.org/gs-api/classGSCompanyMode}{\texttt{ No\+GO API documentation}} for reference ({\itshape link will open a new window/tab}) .

\begin{DoxyReturn}{Returns}
boolean 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Entered company mode successfully \\
\hline
{\em false} & Failed entering company mode \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00778}{778}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a26677bef40de4e35f4823c93aaeda000}\label{class_idle_story_a26677bef40de4e35f4823c93aaeda000} 
\index{IdleStory@{IdleStory}!LeaveCompanyMode@{LeaveCompanyMode}}
\index{LeaveCompanyMode@{LeaveCompanyMode}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{LeaveCompanyMode()}{LeaveCompanyMode()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Leave\+Company\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Leaves company mode. 

Leaves company mode, resetting local reference \doxylink{class_idle_story_a540485a4cdf5d8309a672f02ea3b062c}{company\+Mode} that was set in \doxylink{class_idle_story_a6130daf1b2acf9807ceb2f5795ab0cb6}{Enter\+Company\+Mode()} function.

\begin{DoxyReturn}{Returns}
boolean 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Left company mode successfully \\
\hline
{\em false} & Failed leaving company mode \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00796}{796}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a9b84852c6e561b881bffcf8c4b125d95}\label{class_idle_story_a9b84852c6e561b881bffcf8c4b125d95} 
\index{IdleStory@{IdleStory}!CacheVehicleStats@{CacheVehicleStats}}
\index{CacheVehicleStats@{CacheVehicleStats}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{CacheVehicleStats()}{CacheVehicleStats()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Cache\+Vehicle\+Stats (\begin{DoxyParamCaption}\item[{bool}]{force = {\ttfamily false} }\end{DoxyParamCaption})}



Refreshes vehicle stats cache. 

Retrieves fresh values for all stats and updates cache.


\begin{DoxyParams}{Parameters}
{\em force} & Force refreshing cached stats\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00812}{812}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_aeb29563c3ce66f4f2ed0d73aea35404a}\label{class_idle_story_aeb29563c3ce66f4f2ed0d73aea35404a} 
\index{IdleStory@{IdleStory}!IsIdleReportVisible@{IsIdleReportVisible}}
\index{IsIdleReportVisible@{IsIdleReportVisible}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IsIdleReportVisible()}{IsIdleReportVisible()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Is\+Idle\+Report\+Visible (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if idle report is visible. 

If idle report is rendered returns true, even if story book window is closed

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Idle report is rendered \\
\hline
{\em false} & Idle report is not rendered \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00846}{846}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_ad9f8742608871086c9bbeb6a1bbb525d}\label{class_idle_story_ad9f8742608871086c9bbeb6a1bbb525d} 
\index{IdleStory@{IdleStory}!IsSaveWarningScreenVisible@{IsSaveWarningScreenVisible}}
\index{IsSaveWarningScreenVisible@{IsSaveWarningScreenVisible}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IsSaveWarningScreenVisible()}{IsSaveWarningScreenVisible()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Is\+Save\+Warning\+Screen\+Visible (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if save warning screen is visible. 

If save warning is rendered returns true, even if story book window is closed

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Save warning screen is rendered \\
\hline
{\em false} & Save warning screen is not rendered \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00861}{861}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a624cde95da757d9c703c6b2e3755cbcb}\label{class_idle_story_a624cde95da757d9c703c6b2e3755cbcb} 
\index{IdleStory@{IdleStory}!IsSaveWarningTextDisplayed@{IsSaveWarningTextDisplayed}}
\index{IsSaveWarningTextDisplayed@{IsSaveWarningTextDisplayed}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IsSaveWarningTextDisplayed()}{IsSaveWarningTextDisplayed()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Is\+Save\+Warning\+Text\+Displayed (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if save warning text is added to report. 

If save warning text is added to report screen (and report screen is rendered) returns true

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Warning text is added to report screen and report screen is rendered \\
\hline
{\em false} & Warning text is not added to report screen or report screen is not rendered \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00876}{876}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a7fb967d2ee9367e75f4492b7e8d69fbc}\label{class_idle_story_a7fb967d2ee9367e75f4492b7e8d69fbc} 
\index{IdleStory@{IdleStory}!GameSavedWithNegativeBalance@{GameSavedWithNegativeBalance}}
\index{GameSavedWithNegativeBalance@{GameSavedWithNegativeBalance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{GameSavedWithNegativeBalance()}{GameSavedWithNegativeBalance()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Game\+Saved\+With\+Negative\+Balance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if game was saved with negative balance. 

This function determines if game was saved while having lost money in previous year. We need to inform the player if that\textquotesingle{}s the case.

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & Game was saved with negative balance and no warning was displayed \\
\hline
{\em false} & Game was saved with positive balance {\bfseries{or}} it was saved with positive balance but the warning was/is already displayed to players \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00891}{891}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a4a84dc1198fd1131a1c193a52c30ced2}\label{class_idle_story_a4a84dc1198fd1131a1c193a52c30ced2} 
\index{IdleStory@{IdleStory}!IsAnyScreenOpen@{IsAnyScreenOpen}}
\index{IsAnyScreenOpen@{IsAnyScreenOpen}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IsAnyScreenOpen()}{IsAnyScreenOpen()}}
{\footnotesize\ttfamily function Idle\+Story\+::\+Is\+Any\+Screen\+Open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check if anything is visible. 

Check if story book window is open and that any of the screens is rendered

\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em true} & One of the screens is rendered and visible \\
\hline
{\em false} & No screen is visible \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00906}{906}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.



\doxysubsection{Member Data Documentation}
\Hypertarget{class_idle_story_aa25635a0c58eab0462d38a65727e0688}\label{class_idle_story_aa25635a0c58eab0462d38a65727e0688} 
\index{IdleStory@{IdleStory}!PlayerCompanyID@{PlayerCompanyID}}
\index{PlayerCompanyID@{PlayerCompanyID}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{PlayerCompanyID}{PlayerCompanyID}}
{\footnotesize\ttfamily Idle\+Story\+::\+Player\+Company\+ID = GSCompany.\+COMPANY\+\_\+\+INVALID}



Player company ID. 

Although initially set to \href{https://docs.openttd.org/gs-api/classGSCompany}{\texttt{ GSCompany\+::\+COMPANY\+\_\+\+INVALID}}, this value gets populated in constructor so it can be regarded as always present. 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00035}{35}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a0594404e1c9686b50d70b46b24769b74}\label{class_idle_story_a0594404e1c9686b50d70b46b24769b74} 
\index{IdleStory@{IdleStory}!IdleStoryPageID@{IdleStoryPageID}}
\index{IdleStoryPageID@{IdleStoryPageID}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IdleStoryPageID}{IdleStoryPageID}}
{\footnotesize\ttfamily Idle\+Story\+::\+Idle\+Story\+Page\+ID = GSStory\+Page.\+STORY\+\_\+\+PAGE\+\_\+\+INVALID}



Idle story book page ID. 

Set to \href{https://docs.openttd.org/gs-api/classGSStoryPage}{\texttt{ GSStory\+Page}}.STORY\+\_\+\+PAGE\+\_\+\+INVALID by, gets created when new game starts and saved to be re-\/used on game load. \begin{DoxyNote}{Note}
Although this property is public and accesible from outside it shouldn\textquotesingle{}t be changed directly, \doxylink{class_idle_story_a58fce52265f3b1a7669058a2d6d7f542}{this.Get\+Page\+ID()} should be used instead. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00044}{44}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a343f1d94ad57bc0e6f00d9a34e6f3246}\label{class_idle_story_a343f1d94ad57bc0e6f00d9a34e6f3246} 
\index{IdleStory@{IdleStory}!IdleBalance@{IdleBalance}}
\index{IdleBalance@{IdleBalance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IdleBalance}{IdleBalance}}
{\footnotesize\ttfamily Idle\+Story\+::\+Idle\+Balance = 0}



Latest idle balance. 

Amount of money that player receives (or loses) upon loading saved game. This is basically last year balance multiplied by percent value derived from \doxysectlink{index_config_sec}{idle\+\_\+multiplier}{2} game setting.

Value from this property is used when changing player bank balance, and is always reset to 0 afterwards. 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00054}{54}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a6aac23fcac191fb9f818da83393c7b66}\label{class_idle_story_a6aac23fcac191fb9f818da83393c7b66} 
\index{IdleStory@{IdleStory}!CurrentCash@{CurrentCash}}
\index{CurrentCash@{CurrentCash}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{CurrentCash}{CurrentCash}}
{\footnotesize\ttfamily Idle\+Story\+::\+Current\+Cash = 0}



Amount of cash company has. 

Amount of money the company had in the beginning of current year. Used internally for calulating idle balance 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00104}{104}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a4a91a8cb3a6437f0508783a173924e72}\label{class_idle_story_a4a91a8cb3a6437f0508783a173924e72} 
\index{IdleStory@{IdleStory}!PreviousMonth@{PreviousMonth}}
\index{PreviousMonth@{PreviousMonth}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{PreviousMonth}{PreviousMonth}}
{\footnotesize\ttfamily Idle\+Story\+::\+Previous\+Month = -\/1}



Latest in-\/game month detected. 

Used internally to detect new year and recalculate last year balance 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00112}{112}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_a540485a4cdf5d8309a672f02ea3b062c}\label{class_idle_story_a540485a4cdf5d8309a672f02ea3b062c} 
\index{IdleStory@{IdleStory}!companyMode@{companyMode}}
\index{companyMode@{companyMode}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{companyMode}{companyMode}}
{\footnotesize\ttfamily Idle\+Story\+::company\+Mode = null}



Company mode (null if not active) 

Reference to active company mode, used internally by \doxylink{class_idle_story_a6130daf1b2acf9807ceb2f5795ab0cb6}{Enter\+Company\+Mode} and \doxylink{class_idle_story_a26677bef40de4e35f4823c93aaeda000}{Leave\+Company\+Mode} functions. 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00120}{120}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

\Hypertarget{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589}\label{class_idle_story_adb1c9b398e50477034f7b5e4c89a5589} 
\index{IdleStory@{IdleStory}!IdlePagesInstance@{IdlePagesInstance}}
\index{IdlePagesInstance@{IdlePagesInstance}!IdleStory@{IdleStory}}
\doxysubsubsection{\texorpdfstring{IdlePagesInstance}{IdlePagesInstance}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_idle_pages}{Idle\+Pages}} Idle\+Story\+::\+Idle\+Pages\+Instance = null}



Reference to idle pages class instance. 

Gets created in \doxylink{class_idle_story_a4ee746cb12cc6874510439575f85a999}{Initialize} and lives throughout the session. Manages and renders story book page screens. 

Definition at line \mbox{\hyperlink{_idle_story_8nut_source_l00147}{147}} of file \mbox{\hyperlink{_idle_story_8nut_source}{Idle\+Story.\+nut}}.

